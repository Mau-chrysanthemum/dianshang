(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["Roles"],{"3f18":function(e,t,i){},4204:function(e,t,i){"use strict";var a=i("3f18"),l=i.n(a);l.a},"42a9":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("my-breadcrumb",{attrs:{level1:"权限管理",level2:"角色列表"}}),i("el-button",{attrs:{type:"success",plain:""},on:{click:function(t){e.dialogVisible4Add=!0}}},[e._v("添加角色")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList}},[i("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,function(a){return i("el-row",{key:a.id},[i("el-col",{attrs:{span:3}},[i("el-tag",{attrs:{closable:""},on:{close:function(i){e.deleteRights(t.$index,t.row.id,a.id)}}},[e._v("\n                            "+e._s(a.authName)+"\n                        ")]),a.children.length>0?i("i",{staticClass:"el-icon-arrow-right arrow"}):e._e()],1),i("el-col",{attrs:{span:21}},e._l(a.children,function(a){return i("el-row",{key:a.id,staticClass:"authlist"},[i("el-col",{attrs:{span:4}},[i("el-tag",{attrs:{type:"success",closable:""},on:{close:function(i){e.deleteRights(t.$index,t.row.id,a.id)}}},[e._v("\n                                    "+e._s(a.authName)+"\n                                ")]),a.children.length>0?i("i",{staticClass:"el-icon-arrow-right arrow"}):e._e()],1),i("el-col",{attrs:{span:20}},e._l(a.children,function(a){return i("el-tag",{key:a.id,staticClass:"thirditem",attrs:{closable:"",type:"warning"},on:{close:function(i){e.deleteRights(t.$index,t.row.id,a.id)}}},[e._v("\n                                    "+e._s(a.authName)+"\n                                ")])}),1)],1)}),1)],1)})}}])}),i("el-table-column",{attrs:{type:"index",width:"50"}}),i("el-table-column",{attrs:{label:"角色名称",prop:"roleName",width:"180"}}),i("el-table-column",{attrs:{label:"角色描述",prop:"roleDesc",width:"400"}}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"small",plain:""},on:{click:function(i){e.editRole(t.row.id)}}}),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"small",plain:""},on:{click:function(i){e.deleteRole(t.row.id)}}}),i("el-button",{attrs:{type:"warning",icon:"el-icon-check",size:"small",plain:""},on:{click:function(i){e.grantRights(t.row)}}})]}}])})],1),i("el-dialog",{attrs:{title:"新增角色",visible:e.dialogVisible4Add,width:"50%"},on:{"update:visible":function(t){e.dialogVisible4Add=t}}},[i("el-form",{ref:"addRoleRef",staticClass:"demo-ruleForm",attrs:{model:e.addRoleObj,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[i("el-input",{model:{value:e.addRoleObj.roleName,callback:function(t){e.$set(e.addRoleObj,"roleName",t)},expression:"addRoleObj.roleName"}})],1),i("el-form-item",{attrs:{label:"角色描述"}},[i("el-input",{model:{value:e.addRoleObj.roleDesc,callback:function(t){e.$set(e.addRoleObj,"roleDesc",t)},expression:"addRoleObj.roleDesc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible4Add=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"修改角色",visible:e.dialogVisible4Edit,width:"50%"},on:{"update:visible":function(t){e.dialogVisible4Edit=t}}},[i("el-form",{ref:"editRoleRef",staticClass:"demo-ruleForm",attrs:{model:e.editRoleObj,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"角色名称",prop:"roleName"}},[i("el-input",{model:{value:e.editRoleObj.roleName,callback:function(t){e.$set(e.editRoleObj,"roleName",t)},expression:"editRoleObj.roleName"}})],1),i("el-form-item",{attrs:{label:"角色描述"}},[i("el-input",{model:{value:e.editRoleObj.roleDesc,callback:function(t){e.$set(e.editRoleObj,"roleDesc",t)},expression:"editRoleObj.roleDesc"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible4Edit=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.editRole2}},[e._v("确 定")])],1)],1),i("el-dialog",{attrs:{title:"角色赋权",visible:e.dialogVisible4Grant,width:"60%"},on:{"update:visible":function(t){e.dialogVisible4Grant=t}}},[i("el-tree",{ref:"grantTreeRef",attrs:{data:e.treeRights,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.checkedKeys,props:e.defaultProps}}),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisible4Grant=!1}}},[e._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:e.submitGrant}},[e._v("确 定")])],1)],1)],1)},l=[],s=(i("ac6a"),i("cadf"),i("551c"),i("097d"),i("a351")),o={components:{MyBreadcrumb:s["a"]},data:function(){return{rolesList:[],dialogVisible4Add:!1,dialogVisible4Edit:!1,dialogVisible4Grant:!1,addRoleObj:{roleName:"",roleDesc:""},editRoleObj:{roleName:"",roleDesc:""},rules:{roleName:[{required:!0,message:"请输入角色名称",trigger:"blur"}]},treeRights:[],checkedKeys:[],defaultProps:{children:"children",label:"authName"},roleId:null}},created:function(){this.getRolesListData()},methods:{getRolesListData:function(){var e=this;this.$axios.get("roles").then(function(t){e.rolesList=t.data.data})},addRole:function(){var e=this;this.$refs.addRoleRef.validate(function(t){t&&e.$axios.post("roles",e.addRoleObj).then(function(t){201===t.data.meta.status&&(e.$message({message:t.data.meta.msg,type:"success"}),e.dialogVisible4Add=!1,e.getRolesListData())})})},editRole:function(e){var t=this;this.$axios.get("roles/".concat(e)).then(function(e){t.editRoleObj=e.data.data,t.dialogVisible4Edit=!0})},editRole2:function(){var e=this;this.$axios.put("roles/".concat(this.editRoleObj.roleId),this.editRoleObj).then(function(t){200===t.data.meta.status&&(e.$message({message:t.data.meta.msg,type:"success"}),e.dialogVisible4Edit=!1,e.getRolesListData())})},deleteRole:function(e){var t=this;this.$confirm("确定删除该角色吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$axios.delete("roles/".concat(e)).then(function(e){200===e.data.meta.status&&(t.$message({message:e.data.meta.msg,type:"success"}),t.getRolesListData())})}).catch(function(){})},deleteRights:function(e,t,i){var a=this;this.$axios.delete("roles/".concat(t,"/rights/").concat(i)).then(function(t){200===t.data.meta.status&&(a.$message({message:t.data.meta.msg,type:"success"}),a.rolesList[e].children=t.data.data)})},grantRights:function(e){var t=this;this.roleId=e.id,this.checkedKeys=[],e.children&&e.children.length>0&&e.children.forEach(function(e){e.children&&e.children.length>0&&e.children.forEach(function(e){e.children&&e.children.length>0&&e.children.forEach(function(e){t.checkedKeys.push(e.id)})})}),this.$axios.get("rights/tree").then(function(e){t.treeRights=e.data.data,t.dialogVisible4Grant=!0})},submitGrant:function(){var e=this,t=this.$refs.grantTreeRef.getCheckedKeys(),i=this.$refs.grantTreeRef.getHalfCheckedKeys(),a=t.concat(i),l=a.join(",");this.$axios.post("roles/".concat(this.roleId,"/rights"),{rids:l}).then(function(t){200===t.data.meta.status&&(e.$message({message:t.data.meta.msg,type:"success"}),e.dialogVisible4Grant=!1,e.getRolesListData())})}}},n=o,r=(i("4204"),i("2877")),c=Object(r["a"])(n,a,l,!1,null,"65e50418",null);t["default"]=c.exports},a351:function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/layout"}}},[e._v("首页")]),i("el-breadcrumb-item",[e._v(e._s(e.level1))]),i("el-breadcrumb-item",[e._v(e._s(e.level2))])],1)],1)},l=[],s=(i("cadf"),i("551c"),i("097d"),{props:{level1:String,level2:String},methods:{sendValueToParent:function(){this.$emit("myevent")}}}),o=s,n=(i("a7a6"),i("2877")),r=Object(n["a"])(o,a,l,!1,null,"d11b0d8a",null);t["a"]=r.exports},a7a6:function(e,t,i){"use strict";var a=i("b61b"),l=i.n(a);l.a},ac6a:function(e,t,i){for(var a=i("cadf"),l=i("0d58"),s=i("2aba"),o=i("7726"),n=i("32e9"),r=i("84f2"),c=i("2b4c"),d=c("iterator"),u=c("toStringTag"),f=r.Array,h={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},b=l(h),m=0;m<b.length;m++){var g,p=b[m],R=h[p],v=o[p],y=v&&v.prototype;if(y&&(y[d]||n(y,d,f),y[u]||n(y,u,p),r[p]=f,R))for(g in a)y[g]||s(y,g,a[g],!0)}},b61b:function(e,t,i){}}]);